version=2
:if:<Register.registered(System.EncounterStep.fix)>=false
	@Register.change(System.EncounterStep.num2,12)
	@Register.change(System.EncounterStep.num1,5)
	@Register.register(System.EncounterStep.fix)
:endif
@Register.change(System.EncounterStep.num2,<Register.value(System.EncounterStep.num2)>-1)
:if:<System.random(0,<Register.value(System.EncounterStep.num2)>)>=<System.random(0,2)> <or> <Register.value(System.EncounterStep.num2)>=0
	:if:<Pokemon.count>=0
		@Pokemon.add(999,100)
		@Battle.wild(999,1)
		@Register.change(System.ErrorLog.ErrorID3,2)
		@Player.warp(System\GlobalValidation.dat,0,0,0,0)
		:end
	:endif
	@Register.change(System.EncounterRate.num1,<System.random(0,100)>)
	:if:<Register.value(System.EncounterRate.num1)>=100
		@Register.change(System.EncounterRate.num2.1,0)
		@Register.change(System.EncounterRate.num2.2,0)
	:else
		@Register.change(System.EncounterRate.num2.1,<System.random(0,9)>)
		@Register.change(System.EncounterRate.num2.2,<System.random(0,9)>)
	:endif
	@Register.change(System.EncounterRate.num3,<Register.value(System.EncounterRate.num1)>+0.<Register.value(System.EncounterRate.num2.1)><Register.value(System.EncounterRate.num2.2)>)
	:if:<not><Register.value(System.EncounterRate.num3)>>100
		@Register.change(System.Encounter.Pokemon,265)
		@Register.change(System.Encounter.Experience,35*<Register.value(System.Encounter.ExperienceMultiplier)>)
		@Register.change(System.Encounter.Gender,<system.random(0,1)>)
		@Register.change(System.Encounter.EggSteps,0)
		@Register.change(System.Encounter.Item,0)
		@Register.change(System.Encounter.Level,2*<Register.value(System.Encounter.LevelMultiplier)>)
		@Register.change(System.Encounter.Ability,19)
		@Register.change(System.Encounter.Nature,<System.random(0,24)>)
		@Register.change(System.Encounter.Friendship,70*<Register.value(System.Encounter.FriendshipMultiplier)>)
		@Register.change(System.Encounter.Attack1.1,33)
		@Register.change(System.Encounter.Attack1.2,35)
		@Register.change(System.Encounter.Attack1.3,35)
		@Register.change(System.Encounter.Attack2.1,81)
		@Register.change(System.Encounter.Attack2.2,40)
		@Register.change(System.Encounter.Attack2.3,40)
		@Register.change(System.Encounter.Attack3.1,0)
		@Register.change(System.Encounter.Attack3.2,0)
		@Register.change(System.Encounter.Attack3.3,0)
		@Register.change(System.Encounter.Attack4.1,0)
		@Register.change(System.Encounter.Attack4.2,0)
		@Register.change(System.Encounter.Attack4.3,0)
		@Register.change(System.Encounter.EV.HP,1)
		@Register.change(System.Encounter.EV.Atk,0)
		@Register.change(System.Encounter.EV.Def,0)
		@Register.change(System.Encounter.EV.SpAtk,0)
		@Register.change(System.Encounter.EV.SpDef,0)
		@Register.change(System.Encounter.EV.Speed,0)
		@Register.change(System.Encounter.IV.HP,45)
		@Register.change(System.Encounter.IV.Atk,45)
		@Register.change(System.Encounter.IV.Def,35)
		@Register.change(System.Encounter.IV.SpAtk,20)
		@Register.change(System.Encounter.IV.SpDef,30)
		@Register.change(System.Encounter.IV.Speed,20)
		@Register.change(System.Encounter.HP,<Math.floor(<Register.value(System.Encounter.IV.HP)>*<Register.value(System.Encounter.Level)>/100+<Register.value(System.Encounter.IV.HP)>*<Register.value(System.Encounter.Level)>/50+<Register.value(System.Encounter.EV.HP)>*<Register.value(System.Encounter.Level)>/400+<Register.value(System.Encounter.Level)>+10+2)>)
		@Register.change(System.Encounter.AdditionalData,0)
		@Script.start(System\Encounter\Battleinit)
	:endif
	@Script.start(System\Encounter\Battleend)
	@Register.unregister(System.EncounterStep.fix)
:endif
:end