version=2
:if:<Register.value(System.New BattleV2 Exp)>=true
	@Storage.set(int,System.Encounter.Experience,0)
	:if:<Pokemon.count>>0 <and> <not><Pokemon.totalexp(0)>=<Storage.get(int,System.Encounter.Pokemon.1.TotalEXP)>
		@Storage.set(int,System.Encounter.Experience,<Storage.get(int,System.Encounter.Experience)>+<Math.int(<Pokemon.totalexp(0)>-<Storage.get(int,System.Encounter.Pokemon.1.TotalEXP)>)>)
	:endif
	:if:<Pokemon.count>>1 <and> <not><Pokemon.totalexp(1)>=<Storage.get(int,System.Encounter.Pokemon.2.TotalEXP)>
		@Storage.set(int,System.Encounter.Experience,<Storage.get(int,System.Encounter.Experience)>+<Math.int(<Pokemon.totalexp(1)>-<Storage.get(int,System.Encounter.Pokemon.2.TotalEXP)>)>)
	:endif
	:if:<Pokemon.count>>2 <and> <not><Pokemon.totalexp(2)>=<Storage.get(int,System.Encounter.Pokemon.3.TotalEXP)>
		@Storage.set(int,System.Encounter.Experience,<Storage.get(int,System.Encounter.Experience)>+<Math.int(<Pokemon.totalexp(2)>-<Storage.get(int,System.Encounter.Pokemon.3.TotalEXP)>)>)
	:endif
	:if:<Pokemon.count>>3 <and> <not><Pokemon.totalexp(3)>=<Storage.get(int,System.Encounter.Pokemon.4.TotalEXP)>
		@Storage.set(int,System.Encounter.Experience,<Storage.get(int,System.Encounter.Experience)>+<Math.int(<Pokemon.totalexp(3)>-<Storage.get(int,System.Encounter.Pokemon.4.TotalEXP)>)>)
	:endif
	:if:<Pokemon.count>>4 <and> <not><Pokemon.totalexp(4)>=<Storage.get(int,System.Encounter.Pokemon.5.TotalEXP)>
		@Storage.set(int,System.Encounter.Experience,<Storage.get(int,System.Encounter.Experience)>+<Math.int(<Pokemon.totalexp(4)>-<Storage.get(int,System.Encounter.Pokemon.5.TotalEXP)>)>)
	:endif
	:if:<Pokemon.count>>5 <and> <not><Pokemon.totalexp(5)>=<Storage.get(int,System.Encounter.Pokemon.6.TotalEXP)>
		@Storage.set(int,System.Encounter.Experience,<Storage.get(int,System.Encounter.Experience)>+<Math.int(<Pokemon.totalexp(5)>-<Storage.get(int,System.Encounter.Pokemon.6.TotalEXP)>)>)
	:endif
	:if:<not><Storage.get(int,System.Encounter.Experience)>=0
		:if:<Pokemon.count>>0
			@Pokemon.gainexp(0,<Storage.get(int,System.Encounter.Experience)>)
		:endif
		:if:<Pokemon.count>>1
			@Pokemon.gainexp(1,<Storage.get(int,System.Encounter.Experience)>)
		:endif
		:if:<Pokemon.count>>2
			@Pokemon.gainexp(2,<Storage.get(int,System.Encounter.Experience)>)
		:endif
		:if:<Pokemon.count>>3
			@Pokemon.gainexp(3,<Storage.get(int,System.Encounter.Experience)>)
		:endif
		:if:<Pokemon.count>>4
			@Pokemon.gainexp(4,<Storage.get(int,System.Encounter.Experience)>)
		:endif
		:if:<Pokemon.count>>5
			@Pokemon.gainexp(5,<Storage.get(int,System.Encounter.Experience)>)
		:endif
		@Text.show(All your Pok√©mon have gained~Additional <Storage.get(int,System.Encounter.Experience)> EXP from battle.)
		@Script.start(System\Encounter\BattleCheck)
	:endif
	@Script.start(System\Encounter\Battleint)
:endif
:end