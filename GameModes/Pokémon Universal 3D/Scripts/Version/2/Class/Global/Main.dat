version=2
##############################
# Sub Global.Main
##############################

@Storage.set(str,StackTrace.Set,Version\2\Class\Global\Main.dat)
@Script.start(Version\2\Class\StackTrace\Set)

:if:<Storage.get(bool,Security.FileValidation.Checks)>=true
	@Storage.set(bool,Security.FileValidation.ScriptExist,true)
	:end
:endif

# Reset Screen.
@Title.clear
@Camera.defix
@Screen.fadein
@Level.update

:if:<Storage.get(bool,Global.Main.Start)>=false
	# Save Game.
	@Script.start(Version\2\Class\Global\Save)
	
	# Stop the music.
	@Music.play(Stop)

	# File Validation.
	@Script.start(Version\2\Class\Security\FileValidation)

	# Update Game.
	@Script.start(Version\2\Class\Update\v0.54.0.0.0.16)
	@Script.start(Version\2\Class\Global\Register)
	
	# Initalize Options.
	@Script.start(Version\2\Class\Global\Language)
	
	# Start Main Menu Screen.
	@Script.start(Version\2\Class\Screen\<Register.value(Global.Token)>\TitleScreen)
	
	@Storage.set(bool,Global.Main.Start,true)
:else
	@Script.start(<Register.value(Global.Token)>\<filesystem.pathup(<Level.levelfile>)>\<Level.filename>)
:endif
:end