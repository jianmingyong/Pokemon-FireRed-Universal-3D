version=2
##############################
# Sub Screen.NewGameScreen
##############################

@Storage.set(str,StackTrace.Set,Version\2\Class\Screen\NewGameScreen.dat)
@Script.start(Version\2\Class\StackTrace\Set)

:if:<Storage.get(bool,Security.FileValidation.Checks)>=true
	@Storage.set(bool,Security.FileValidation.ScriptExist,true)
	:end
:endif

# New Game Initial Checks.
@Storage.set(str,Screen.NewGameScreen.LoadData,)
@Storage.set(int,Screen.NewGameScreen.LoadData.Count,0)

# Add Support to GameModes.
:if:<Register.registered(Global.Load.Pokémon Delta Emerald)>=false
	@Storage.update(str,Screen.NewGameScreen.LoadData,add,Pokémon Delta Emerald,)
	@Storage.update(int,Screen.NewGameScreen.LoadData.Count,add,1)
:endif
:if:<Register.registered(Global.Load.Pokémon Dark Energy)>=false
	@Storage.update(str,Screen.NewGameScreen.LoadData,add,Pokémon Dark Energy,)
	@Storage.update(int,Screen.NewGameScreen.LoadData.Count,add,1)
:endif
:if:<Register.registered(Global.Load.Pokémon Sunshore Isle)>=false
	@Storage.update(str,Screen.NewGameScreen.LoadData,add,Pokémon Sunshore Isle,)
	@Storage.update(int,Screen.NewGameScreen.LoadData.Count,add,1)
:endif

@Storage.update(str,Screen.NewGameScreen.LoadData,add,Back)

@Text.show(Choose your starting game.)
@Options.setcancelindex(<Storage.get(int,Screen.NewGameScreen.LoadData.Count)>)
@Options.show(<Storage.get(str,Screen.NewGameScreen.LoadData)>)
:when:Pokémon Delta Emerald
	@Script.start(Version\2\Class\GameMode\Pokémon Delta Emerald)
	@Script.start(Version\2\Class\Screen\ValidationScreen)
:when:Pokémon Dark Energy
	@Register.change(Global.GameName,Pokémon Dark Energy)
	@Script.start(Version\2\Class\Screen\ValidationScreen)
:when:Pokémon Sunshore Isle
	@Register.change(Global.GameName,Pokémon Sunshore Isle)
	@Script.start(Version\2\Class\Screen\ValidationScreen)
:when:Back
	@Script.start(Version\2\Class\Screen\TitleScreen)
:endwhen
:end